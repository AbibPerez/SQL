# 1.4 - Operadores SQL

Los operadores SQL son símbolos o palabras clave que se utilizan para realizar operaciones sobre datos en consultas SQL.

- Realizan operaciones como cálculos, comparaciones y comprobaciones lógicas.
- Habilitan el filtrado, cálculo y actualización de datos en bases de datos.
- Esencial para la optimización de consultas y una gestión precisa de datos.

## 1. Operadores aritméticos

Los operadores aritméticos en SQL se utilizan para realizar operaciones matemáticas sobre tipos de datos numéricos en consultas SQL.

| Operador | Descripción    |
| -------- | -------------- |
| `+`      | Adición        |
| `-`      | Sustracción    |
| `*`      | Multiplicación |
| `/`      | División       |
| `%`      | Módulo         |

##### Ejemplo

```SQL
    -- Tabla de ejemplo
    CREATE TABLE Empleados (
        EmpleadoID INT,
        EmpleadoNombre VARCHAR(50),
        Sueldo INT,
        Bonos INT
    );
    -- Datos de ejemplo
    INSERT INTO Empleados (EmpleadoID, EmpleadoNombre, Sueldo, Bonos)
    VALUES
    (1, 'Amit', 40000, 5000),
    (2, 'Neha', 50000, 7000),
    (3, 'Ravi', 30000, 3000);

    -- Uso de operadores aritméticos
    SELECT
        EmpleadoNombre,
        Sueldo,
        Bonos,
        Sueldo + Bonos AS Ingresos_Totales,         -- Adición
        Sueldo - Bonos AS Despues_Deduccion,        -- Sustracción
        Sueldo * 0.10 AS Diez_Porciento,            -- Multiplicación
        Sueldo / 12 AS Sueldo_Mensual,              -- División
        Sueldo % 10000 AS Sueldo_Restante           -- Módulo
    FROM Empleados;
```

##### Salida:

| EmpleadoNombre | Sueldo | Bonos | Ingresos_Totales | Despues_Deduccion |
| -------------- | ------ | ----- | ---------------- | ----------------- |
| Amit           | 40000  | 5000  | 45000            | 35000             |
| Neha           | 50000  | 7000  | 57000            | 43000             |
| Ravi           | 30000  | 3000  | 33000            | 27000             |

---

## 2. Operadores de comparación

Los operadores de comparación en SQL se utilizan para comparar el valor de una expresión con otras expresiones. SQL soporta diferentes tipos de operadores de comparación.

| Operador | Descripción     |
| -------- | --------------- |
| `=`      | Igual a         |
| `>`      | Mayor a         |
| `<`      | Menor a         |
| `>=`     | Mayor o igual a |
| `<=`     | Menor o igual a |
| `<>`     | Diferente a     |

##### Ejemplo

```SQL
    CREATE TABLE Alumnos (
        ID INT,
        Nombre VARCHAR(50),
        Calificacion INT
    );

    INSERT INTO Alumnos VALUES
    (1, 'Amit', 85),
    (2, 'Neha', 70),
    (3, 'Ravi', 55);

    SELECT *
    FROM Alumnos
    WHERE Calificacion >= 70;
```

##### Salida:

| ID  | Nombre | Calificación |
| --- | ------ | ------------ |
| 1   | Amit   | 85           |
| 2   | Neha   | 70           |

---
## 3. Operadores lógicos

Los operadores lógicos en SQL se utilizan para combinar o manipular condiciones en consultas SQL para recuperar o manipular datos según criterios especificados.

| Operador  | Descripción                                                         |
| --------- | ------------------------------------------------------------------- |
| `ALL`     | TRUE si todos los valores de la consulta cumplen con la condición   |
| `AND`     | TRUE si todas las condiciones separadas por AND son VERDADERAS      |
| `ANY`     | TRUE si alguno de los valores de la consulta cumple la condición    |
| `BETWEEN` | TRUE si el operando está dentro del rango de comparaciones          |
| `EXISTS`  | TRUE si la consulta devuelve uno o más registros                    |
| `IN`      | TRUE si el operando es igual a un valor en una lista de expresiones |
| `LIKE`    | TRUE si el operando coincide con un patrón                          |
| `NOT`     | Muestra un registro si la condición o condiciones son NO VERDADERAS |
| `OR`      | TRUE si alguna de las condiciones separadas por OR son VERDADERAS   |
| `SOME`    | TRUE si alguno de los valores en la consulta cumple la condición    |

##### Ejemplo

```SQL
    CREATE TABLE Alumnos (
        ID INT,
        Nombre VARCHAR(50),
        Calificacion INT,
        Edad INT
    );

    INSERT INTO Alumnos VALUES
    (1, 'Amit', 85, 18),
    (2, 'Neha', 70, 19),
    (3, 'Ravi', 55, 17);

    SELECT *
    FROM Alumnos
    WHERE Calificacion >= 70 AND Edad >= 18;        -- Ambas condiciones deben ser verdaderas

    SELECT *
    FROM Alumnos
    WHERE Calificacion <= 60 OR Edad < 18;          -- Alguna condición puede ser verdadera

    SELECT *
    FROM Alumnos
    WHERE NOT Calificacion >= 70;                   -- Invierte la condición
```

##### Salida:

| ID  | Nombre | Calificacion | Edad |
| --- | ------ | ------------ | ---- |
| 1   | Amit   | 85           | 18   |
| 2   | Neha   | 70           | 19   |

##### Otro ejemplo
```SQL
    CREATE TABLE Alumnos (
        ID INT,
        Nombre VARCHAR(50),
        Calificacion INT
    );

    INSERT INTO Alumnos VALUES
    (1, 'Amit', 85),
    (2, 'Neha', 70),
    (3, 'Ravi', 55),
    (4, 'Kiran', NULL);

    -- Ejemplo 1: Operador BETWEEN
    SELECT * FROM Alumnos
    WHERE Calificacion BETWEEN 60 AND 90;

    -- Ejemplo 2: Operador IN
    SELECT * FROM Alumnos
    WHERE Nombre IN ('Amit', 'Ravi');

    -- Ejemplo 3: Operador LIKE
    SELECT * FROM Alumnos
    WHERE Nombre LIKE '%N%';    -- Nombres que empiecen con N

    -- Ejemplo 4: Operador IS NULL
    SELECT * FROM Alumnos
    WHERE Calificacion IS NULL;

    -- Ejemplo 5: Operador EXISTS 
    SELECT * FROM Alumnos
    WHERE EXISTS ( 
        SELECT * FROM Alumnos
        WHERE Calificacion > 80
    );
```
##### Salida:
| Operador                     | Resultado                                             |
| ---------------------------- | ----------------------------------------------------- |
| `BETWEEN 60 AND 90`          | Amit, Neha                                            |
| `IN ('Amit', 'Ravi')`        | Amit, Ravi                                            |
| `LIKE '%N%'`                 | Neha                                                  |
| `IS NULL`                    | Kiran                                                 |
| `EXISTS (Calificacion > 80)` | Todas las filas (ya que Amit tiene Calificacion > 80) |

---
## 4. Operadores bit a bit

Los operadore bit a bit en SQL se utilizan para realizar operaciones bit a bit sobre valores binarios en consultas SQL, manipulando bits individuales para realizar operaciones lógicas a nivel bit.

| Operador | Descripción   |
| -------- | ------------- |
| `&`      | AND bit a bit |
| `\|`     | OR bit a bit  |
| `^`      | XOR bit a bit |

##### Ejemplo

```SQL
    CREATE TABLE Usuarios (
        UsuarioID INT,
        UsuarioNombre VARCHAR(50),
        Permisos INT        -- Almacena indicadores de permisos como número
    );

    -- Indicadores de permisos: Leer=1, Escribir=2, Ejecutar=4
    INSERT INTO Usuarios (UsuarioID, UsuarioNombre, Permisos) VALUES
    (1, 'Amit', 1),                 -- Solo lectura
    (2, 'Neha', 3),                 -- Lectura y escritura
    (3, 'Ravi', 7);                 -- Lectura, escritura y ejecución

    -- Ejemplo 1: Verificar si un usuario tiene permisos de escritura (AND bit a bit)
    SELECT *
    FROM Usuarios
    WHERE Permisos & 2 = 2;         -- 2 = Permisos de escritura

    -- Ejemplo 2: Añadir permisos de ejecución (OR bit a bit)
    UPDATE Usuarios
    SET Permisos = Permisos | 4
    WHERE UsuarioNombre = 'Neha';   -- Ahora, Neha tiene permisos de ejecución

    -- Ejemplo 3: Eliminar permisos de lectura (AND bit a bit + NOT)
    UPDATE Usuarios
    SET Permisos = Permisos & ~1
    WHERE UsuarioNombre = 'Ravi';   -- Eliminar permisos de lectura a Ravi

    -- Ejemplo 4: Conceder permisos de escritura (XOR bit a bit)
    UPDATE Usuarios
    SET Permisos = Permisos ^ 2
    WHERE UsuarioNombre = 'Amit';   -- Habilitar permisos de lectura

    -- Ejemplo 5: Mostrar permisos finales de todos los usuarios
    SELECT * FROM Usuarios;
```

##### Salida:

| UsuarioNombre | Permisos Iniciales | Operaciones aplicadas              | Permisos finales | Binario | Significado                |
| ------------- | ------------------ | ---------------------------------- | ---------------- | ------- | -------------------------- |
| Amit          | 1                  | Añadir permisos de escritura (^2)  | 3                | 011     | Leer + Escribir            |
| Neha          | 3                  | Añadir permisos de ejecución (\|4) | 7                | 111     | Leer + Escribir + Ejecutar |
| Ravi          | 7                  | Eliminar permisos de lectura (&~1) | 6                | 110     | Escribir + Ejecutar        |

---

## 5. Operadores compuestos
Los operadores compuestos combinan una operación con la asignación. Estos operadores modifican el valor de una columna y almacenan el resultado en la misma columna en un solo paso. 

| Operador | Descripción                  |
| -------- | ---------------------------- |
| `+=`     | Asignación de adición        |
| `-=`     | Asignación de sustracción    |
| `*=`     | Asignación de multiplicación |
| `/=`     | Asignación de división       |
| `%=`     | Asignación de módulo         |
| `&=`     | Asignación de AND bit a bit  |
| `^=`     | Asignación de XOR bit a bit  |
| `\|*`    | Asignación de OR bit a bit   |

##### Ejemplo
```SQL
    CREATE TABLE Empleados (
        EmpleadoID INT,
        EmpleadoNombre VARCHAR(50),
        Sueldo INT
    );

    INSERT INTO Empleados VALUES
    (1, 'Amit', 40000),
    (2, 'Neha', 50000),
    (3, 'Ravi', 30000);

    -- Agregar 5000 al sueldo (+=)
    UPDATE Empleados
    SET Sueldo = Sueldo + 5000;

    -- Reducir 2000 al sueldo (-=)
    UPDATE Empleados
    SET Sueldo = Sueldo - 2000
    WHERE EmpleadoNombre = 'Ravi';

    -- Duplicar sueldo (*=)
    UPDATE Empleados
    SET Sueldo = Sueldo * 2
    WHERE EmpleadoNombre = 'Neha';

    -- Dividir sueldo (/=)
    UPDATE Empleados
    SET Sueldo = Sueldo / 2;
    WHERE EmpleadoNombre = 'Amit';

    -- Ejemplo de Módulo
    SET Sueldo = Sueldo % 10000;
```
##### Salida:
| EmpleadoID | EmpleadoNombre | Sueldo |
| ---------- | -------------- | ------ |
| 1          | Amit           | 5000   |
| 2          | Neha           | 0      |
| 3          | Ravi           | 3000   |

# 6. Operadores especiales
SQL también proporciona varios operadores especiales que cumplen funciones específicas como filtrar datos según un rango, comprobar la existencia y comparar conjuntos de valores. 


