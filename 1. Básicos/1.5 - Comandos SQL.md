# 1.5 - Comandos SQL
Los comandos SQL son bloques fundamentales utilizados para realizar operaciones determinadas en la base de datos. Las operaciones incluyen la consulta de datos, creación de tablas, adición de datos a tablas, eliminación de tablas, modificación de tablas y especificación de permisos de los usuarios.

Los comandos SQL se clasifican principalmente en cinco categorías:
1. DDL - Lenguaje de Definición de Datos
2. DQL - Lenguaje de Consulta de Datos
1. DML - Lenguaje de Manipulación de Datos
4. DCL - Lenguaje de Control de Datos
5. TCL - Lenguaje de Control de Transacciones

---

## 1. DDL - Lenguaje de Definición de Datos
DDL (Data Definition Language) consiste en comandos SQL que pueden usarse para definir, modificar y eliminar estructuras de bases de datos como tablas, índices y esquemas. Simplemente trata con descripciones del esquema de la base de datos y se utiliza para crear y modificar la estructura de los objetos en la base de datos.

| Comando    | Descripción                                 | Sintaxis                                            |
| ---------- | ------------------------------------------- | --------------------------------------------------- |
| `CREATE`   | Crear base de datos u objetos               | `CREATE TABLE <tabla> (<variable> <tipo_dato>);`    |
| `DROP`     | Eliminar objetos de la base de datos        | `DROP TABLE <tabla>;`                               |
| `ALTER`    | Modificar la estructura de la base de datos | `ALTER TABLE <tabla> ADD COLUMN <col> <tipo_dato>;` |
| `TRUNCATE` | Elimina todos los registros de la tabla     | `TRUNCATE TABLE <tabla>;`                           |
| `COMMENT`  | Agrega comentarios al diccionario de datos  | `COMMENT ON TABLE <tabla> IS 'comentario';`         |
| `RENAME`   | Renombra un objeto existente                | `RENAME TABLE <nombre_original> TO <nombre_nuevo>;` |

##### Ejemplo
```SQL
    CREATE TABLE Empleados (
        empleado_id INT PRIMARY KEY,
        nombre VARCHAR(50),
        apellido VARCHAR(50),
        fecha_contrato DATE
    );
```
En este ejemplo, se crea una nueva tabla llamada `Empleados` con columnas para el ID del empleado, nombre, apellido y fecha de contratación.

---
## 2. DQL - Lenguaje de Consulta de Datos
DQL (Data Query Language) se utiliza para obtener datos de la base de datos. El comando principal es `SELECT`, que recupera registros basándose en la consulta. La salida se devuelve como un conjunto de resultados que puede visualizarse o usarse en aplicaciones. 

| Comando    | Descripción                                    | Sintaxis                                                                             |
| ---------- | ---------------------------------------------- | ------------------------------------------------------------------------------------ |
| `SELECT`   | Obtiene información desde la base de datos     | `SELECT <col>...;`                                                                   |
| `FROM`     | Indica de que tabla se obtendrán los datos     | `SELECT <col> FROM <tabla>;`                                                         |
| `WHERE`    | Filtra filas según la condición                | `SELECT <col> FROM <tabla> WHERE <condición>;`                                       |
| `GROUP BY` | Agrupa filas que tengan los mismos valores     | `SELECT <col>, AVG_FUNCTION(<col2>) FROM <tabla> GROUP BY <col>;`                    |
| `HAVING`   | Filtra los resultados de `GROUP BY`            | `SELECT <col>, AVG_FUNCTION(<col2>) FROM <tabla> GROUP BY <col> HAVING <condición>;` |
| `DISTINCT` | Elimina filas duplicadas                       | `SELECT DISTINCT <col>, <col2> FROM <tabla>;`                                        |
| `ORDER BY` | Ordena los resultados de una o más columnas    | `SELECT <col> FROM <tabla> ORDER BY <col> [ASC\|DESC];`                              |
| `LIMIT`    | Ordena en ASC, a menos que se especifique DESC | `SELECT * FROM <tabla> LIMIT <número>;`                                              |

##### Ejemplo
```SQL
    SELECT Nombre, Apellido, fecha_contrato
    FROM Empleados
    WHERE Departamento = 'Ventas'
    ORDER BY fecha_contrato DESC;
```
Esta consulta recupera los nombres y apellidos de los empleados del departamento de 'Ventas', junto con sus fechas de contratación en orden descendente.

---
## 3. DML - Lenguaje de Manipulación de Datos
Los comandos DML (Data Manipulation Language) se utilizan para manipular los datos almacenados en tablas de bases de datos. Con DML, puedes insertar nuevos registros, actualizar los existentes, eliminar datos no deseados o recuperar información.

| Comando  | Descripción                    | Sintaxis                                                                   |
| -------- | ------------------------------ | -------------------------------------------------------------------------- |
| `INSERT` | Inserta datos en una tabla     | `INSERT INTO <tabla> (<col>, <col2>,...) VALUES (<valor>, <valor2>,...);`  |
| `UPDATE` | Actualiza datos existentes     | `UPDATE <tabla> SET <col> = <valor>, <col2> = <valor2> WHERE <condición>;` |
| `DELETE` | Elimina registros de una tabla | `DELETE FROM <tabla> WHERE <condición>;`                                   |

##### Ejemplo
```SQL
    INSERT INTO Empleados (Nombre, Apellido, Departamento) VALUES ('Jane', 'Smith', 'RH');
```
Esta consulta ingresa un nuevo registro dentro de la tabla `Empleados` con el Nombre 'Jane', Apellido 'Smith' y Departamento 'RH'.

---
## 4. DCL - Lenguaje de Control de Datos
DCL (Data Control Language) incluye comandos como `GRANT` y `REVOKE` que se usan principalmente para otorgar derechos, permisos y otros controles del sistema de base de datos. 

| Comando  | Descripción                                             | Sintaxis                                               |
| -------- | ------------------------------------------------------- | ------------------------------------------------------ |
| `GRANT`  | Asigna nuevos privilegios a un usuario                  | `GRANT <privilegio> ON TABLE <tabla> TO '<usuario>;`   |
| `REVOKE` | Elimina privilegios previamente concedidos a un usuario | `REVOKE <privilegio> ON TABLE <tabla> FROM <usuario>;` |

##### Ejemplo
```SQL
    GRANT SELECT, UPDATE ON Empleados TO Administrador;
```

---
## 5. TCL - Lenguaje de Control de Transacciones
Las transacciones agrupan un conjunto de tareas en una única unidad de ejecución. Cada transacción comienza con una tarea específica y termina cuando todas las tareas del grupo se completan con éxito. Si alguna de las tareas falla, la transacción falla. Por lo tanto, una transacción solo tiene dos resultados: éxito o fracaso.

| Comando             | Descripción                                                 | Syntaxis                                 |
| ------------------- | ----------------------------------------------------------- | ---------------------------------------- |
| `BEGIN TRANSACTION` | Inicia una nueva transacción                                | `BEGIN TRANSACTION <nombre_transacción>` |
| `COMMIT`            | Guarda todos los cambios realizados durante la transacción  | `COMMIT;`                                |
| `ROLLBACK`          | Deshace todos los cambios realizados durante la transacción | `ROLLBACK;`                              |
| `SAVEPOINT`         | Crea un punto de guardado dentro de la transacción actual   | `SAVEPOINT <nombre_savepoint>`           |

##### Ejemplo
```SQL
    BEGIN TRANSACTION;
    UPDATE Empleados SET Departamento = 'Marketing' WHERE Departamento = 'Ventas';
    SAVEPOINT antes_update;
    UPDATE Empleados SET Departamento = 'TI' WHERE Departamento = 'RH';
    ROLLBACK TO SAVEPOINT antes_update;
    COMMIT;
```
